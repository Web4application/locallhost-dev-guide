<div id="user-preferences" style="position: fixed; bottom: 20px; right: 20px; 
     background: #222; color: #fff; padding: 15px; border-radius: 8px; z-index: 1000;">
  <h4 style="margin-top:0;">UI Settings</h4>
  <label>Theme: <select id="theme-select"><option value="dark">Dark</option><option value="light">Light</option></select></label>
  <br/><br/>
  <label>Auto-refresh (seconds): <input type="number" id="auto-refresh" min="5" max="120" step="5" value="15"/></label>
  <br/><br/>
  <label>Show Full Log: <input type="checkbox" id="show-full-log"/></label>
</div>

<script>
function setCookie(name,value,days=365){const d=new Date();d.setTime(d.getTime()+(days*24*60*60*1000));document.cookie=name+"="+encodeURIComponent(value)+"; expires="+d.toUTCString()+"; path=/";}
function getCookie(name){const ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i].trim();if(c.indexOf(name+"=")==0)return decodeURIComponent(c.substring(name.length+1));}return null;}
function applyPreferences(){
const theme=getCookie("theme")||"dark";document.body.dataset.theme=theme;
const autoRefresh=parseInt(getCookie("autoRefresh")||"15");
if(window.autoRefreshInterval) clearInterval(window.autoRefreshInterval);
window.autoRefreshInterval=setInterval(()=>location.reload(),autoRefresh*1000);
const showFullLog=getCookie("showFullLog")==="true";
document.querySelectorAll(".console").forEach(c=>{c.style.display=showFullLog?"block":"none";});}
document.addEventListener("DOMContentLoaded",()=>{document.getElementById("theme-select").value=getCookie("theme")||"dark";document.getElementById("auto-refresh").value=getCookie("autoRefresh")||"15";document.getElementById("show-full-log").checked=getCookie("showFullLog")==="true";applyPreferences();});
["theme-select","auto-refresh","show-full-log"].forEach(id=>document.getElementById(id).addEventListener("change",applyPreferences));
</script>
